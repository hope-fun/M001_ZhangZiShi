var AssetAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?n(o):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},n.setProgress=function(e,t){this.textField.text=""},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},n.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createLogoScene()},n.createLogoScene=function(){var e=this;this.logoVM=new ViewModel.LogoVM(this,function(){console.log("Test: Logo and loading scene init finish ! ")});var t=egret.Tween.get(this.logoVM.logoGroup);t.to({alpha:1},2e3).call(function(){e.logoVM.loadingBarItem.visible=!0,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,e.onResourceLoadComplete,e),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,e.onResourceLoadError,e),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,e.onResourceProgress,e),RES.loadGroup("preload")})},n.onResourceLoadComplete=function(e){var t=this;if("preload"==e.groupName){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.isResourceLoadEnd=!0,this.logoVM.loadingBarItem.visible=!1;var i=egret.Tween.get(this.logoVM.logoGroup);i.to({alpha:0},2e3).call(function(){t.removeChild(t.logoVM),t.createScene()})}},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.onResourceProgress=function(e){"preload"==e.groupName&&this.logoVM.loadingBarItem.setProgress(e.itemsLoaded,e.itemsTotal)},n.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},n.startCreateScene=function(){var e=this;""===Model.Tools.getURLParam("channel")?(null==egret.localStorage.getItem("guid")&&egret.localStorage.setItem("guid",Model.Tools.guid()),Model.WebValue.accountM=new Model.AccountModel(egret.localStorage.getItem("guid")),Model.WebService.userLogin(Model.WebValue.accountM,function(t){e.sendMenuData()})):Model.SDKService.initSDK(function(){Model.WebService.userLogin(Model.WebValue.accountM,function(t){e.sendMenuData()})})},n.sendMenuData=function(){var e=this;Model.WebService.menuData(function(t){Model.WebValue.menuDataM=JSON.parse(t.response),Model.DataEyeService.login(Model.WebValue.menuDataM.playerModel.nickName),e.createMainMenuScene()})},n.createMainMenuScene=function(){this.mainMenuVM=new ViewModel.MainMenuVM(this,function(){alert("zhujun:　main menu on call back !　")}),this.titleInfoView=new ViewModel.TitleInfoVM(this);var e=Model.WebValue.menuDataM.playerModel;1===e.level&&0===e.gold&&(this.introductionView=new ViewModel.IntroductionVM(this),console.log("fangchao zai ci"))},t}(eui.UILayer);egret.registerClass(Main,"Main");var Model;!function(e){var t=function(){function e(e){this.id=e}var t=(__define,e);t.prototype;return e}();e.AccountModel=t,egret.registerClass(t,"Model.AccountModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.AnswerDetailModel=t,egret.registerClass(t,"Model.AnswerDetailModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function t(t,i){this.soundKey="",this.position=0,this.loop=1,this.status=0,egret.localStorage.getItem("sound")?e.WebValue.isSound="on"===egret.localStorage.getItem("sound")?!0:!1:e.WebValue.isSound=!0,e.WebValue.isSound&&t&&(this.sound=RES.getRes(t),this.soundChannel=this.sound.play(0,1),this.soundChannel.addEventListener(egret.Event.SOUND_COMPLETE,function(e){console.log(e),null!=i&&i()},this))}var i=(__define,t),n=i.prototype;return n.loadSound=function(){this.sound=RES.getRes(this.soundKey)},n.loadComplete=function(e){this.status=3;var t="加载完成";console.log(t)},n.onLoadErr=function(e){this.status=4;var t="加载失败"+this.soundKey;console.log(t)},n.setKey=function(e){this.soundKey=e,this.loadSound()},n.looped=function(e){this.position=0,this.status=0},n.getStatus=function(){return this.status},n.setVolume=function(e){1===this.status&&(this.soundChannel.volume=e/100)},n.showPosition=function(){return 1===this.status&&(this.position=this.soundChannel.position),this.position},n.play=function(){return 4===this.status?void this.loadSound():(this.status=1,this.soundChannel&&this.soundChannel.stop(),console.log(this.position),this.soundChannel=this.sound.play(this.position,this.loop),void console.log(this.status))},n.setLoop=function(e){return void 0===e&&(e=1),this.loop=e,0>e?void this.soundChannel.addEventListener(egret.Event.SOUND_COMPLETE,this.looped,this):e},n.pause=function(){return console.log(this.status),1===this.status&&(this.position=this.soundChannel.position,this.soundChannel.stop(),this.status=2),this.position},n.resume=function(){2===this.status&&this.play()},t}();e.AudioService=t,egret.registerClass(t,"Model.AudioService")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.BankModel=t,egret.registerClass(t,"Model.BankModel");var i=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.DrawMoneyModel=i,egret.registerClass(i,"Model.DrawMoneyModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function t(){}var i=__define,n=t,o=n.prototype;return i(o,"headImage",function(){return e.Tools.padLeft(String(this.headId),"0",2)}),i(o,"headBgImage",function(){return 1==this.headId||5==this.headId||9==this.headId?"hong":2==this.headId||6==this.headId||10==this.headId?"huang":3==this.headId||7==this.headId||11==this.headId?"lan":"zi"}),t}();e.EnemyModel=t,egret.registerClass(t,"Model.EnemyModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function t(){this.enemyModel=new e.EnemyModel}var i=(__define,t);i.prototype;return t}();e.GameDataModel=t,egret.registerClass(t,"Model.GameDataModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.GoodsModel=t,egret.registerClass(t,"Model.GoodsModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.MallModel=t,egret.registerClass(t,"Model.MallModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.MenuDataModel=t,egret.registerClass(t,"Model.MenuDataModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.PlayerModel=t,egret.registerClass(t,"Model.PlayerModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.QuestionModel=t,egret.registerClass(t,"Model.QuestionModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.SceneModel=t,egret.registerClass(t,"Model.SceneModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.SettleAccountModel=t,egret.registerClass(t,"Model.SettleAccountModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.SkillModel=t,egret.registerClass(t,"Model.SkillModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.SkillTrainingModel=t,egret.registerClass(t,"Model.SkillTrainingModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e),i=t.prototype;return i.Set=function(e,t){this[e]=t},i.Get=function(e){return this[e]},i.Contains=function(e){return null==this.Get(e)?!1:!0},i.Remove=function(e){delete this[e]},i.Clear=function(){},e}();e.HashMap=t,egret.registerClass(t,"Model.HashMap")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.lerp=function(e,t,i){return i=0>i?0:i,i=i>1?1:i,e+(t-e)*i},e.clamp=function(e,t,i){return t>e?t:e>i?i:e},e}();e.Mathf=t,egret.registerClass(t,"Model.Mathf")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){this.hexcase=0,this.b64pad=""}var t=(__define,e),i=t.prototype;return i.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},i.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},i.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},i.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},i.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},i.any_hmac_md5=function(e,t,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),i)},i.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},i.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},i.rstr_hmac_md5=function(e,t){var i=this.rstr2binl(e);i.length>16&&(i=this.binl_md5(i,8*e.length));for(var n=Array(16),o=Array(16),r=0;16>r;r++)n[r]=909522486^i[r],o[r]=1549556828^i[r];var s=this.binl_md5(n.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(o.concat(s),640))},i.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var i,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",r=0;r<e.length;r++)i=e.charCodeAt(r),o+=n.charAt(i>>>4&15)+n.charAt(15&i);return o},i.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",o=e.length,r=0;o>r;r+=3)for(var s=e.charCodeAt(r)<<16|(o>r+1?e.charCodeAt(r+1)<<8:0)|(o>r+2?e.charCodeAt(r+2):0),a=0;4>a;a++)n+=8*r+6*a>8*e.length?this.b64pad:i.charAt(s>>>6*(3-a)&63);return n},i.rstr2any=function(e,t){var i,n,o,r,s,a=t.length,l=Array(Math.ceil(e.length/2));for(i=0;i<l.length;i++)l[i]=e.charCodeAt(2*i)<<8|e.charCodeAt(2*i+1);var d=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),h=Array(d);for(n=0;d>n;n++){for(s=Array(),r=0,i=0;i<l.length;i++)r=(r<<16)+l[i],o=Math.floor(r/a),r-=o*a,(s.length>0||o>0)&&(s[s.length]=o);h[n]=r,l=s}var u="";for(i=h.length-1;i>=0;i--)u+=t.charAt(h[i]);return u},i.str2rstr_utf8=function(e){for(var t,i,n="",o=-1;++o<e.length;)t=e.charCodeAt(o),i=o+1<e.length?e.charCodeAt(o+1):0,t>=55296&&56319>=t&&i>=56320&&57343>=i&&(t=65536+((1023&t)<<10)+(1023&i),o++),127>=t?n+=String.fromCharCode(t):2047>=t?n+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n},i.str2rstr_utf16le=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(255&e.charCodeAt(i),e.charCodeAt(i)>>>8&255);return t},i.str2rstr_utf16be=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e.charCodeAt(i)>>>8&255,255&e.charCodeAt(i));return t},i.rstr2binl=function(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t},i.binl2rstr=function(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t},i.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,n=-271733879,o=-1732584194,r=271733878,s=0;s<e.length;s+=16){var a=i,l=n,d=o,h=r;i=this.md5_ff(i,n,o,r,e[s+0],7,-680876936),r=this.md5_ff(r,i,n,o,e[s+1],12,-389564586),o=this.md5_ff(o,r,i,n,e[s+2],17,606105819),n=this.md5_ff(n,o,r,i,e[s+3],22,-1044525330),i=this.md5_ff(i,n,o,r,e[s+4],7,-176418897),r=this.md5_ff(r,i,n,o,e[s+5],12,1200080426),o=this.md5_ff(o,r,i,n,e[s+6],17,-1473231341),n=this.md5_ff(n,o,r,i,e[s+7],22,-45705983),i=this.md5_ff(i,n,o,r,e[s+8],7,1770035416),r=this.md5_ff(r,i,n,o,e[s+9],12,-1958414417),o=this.md5_ff(o,r,i,n,e[s+10],17,-42063),n=this.md5_ff(n,o,r,i,e[s+11],22,-1990404162),i=this.md5_ff(i,n,o,r,e[s+12],7,1804603682),r=this.md5_ff(r,i,n,o,e[s+13],12,-40341101),o=this.md5_ff(o,r,i,n,e[s+14],17,-1502002290),n=this.md5_ff(n,o,r,i,e[s+15],22,1236535329),i=this.md5_gg(i,n,o,r,e[s+1],5,-165796510),r=this.md5_gg(r,i,n,o,e[s+6],9,-1069501632),o=this.md5_gg(o,r,i,n,e[s+11],14,643717713),n=this.md5_gg(n,o,r,i,e[s+0],20,-373897302),i=this.md5_gg(i,n,o,r,e[s+5],5,-701558691),r=this.md5_gg(r,i,n,o,e[s+10],9,38016083),o=this.md5_gg(o,r,i,n,e[s+15],14,-660478335),n=this.md5_gg(n,o,r,i,e[s+4],20,-405537848),i=this.md5_gg(i,n,o,r,e[s+9],5,568446438),r=this.md5_gg(r,i,n,o,e[s+14],9,-1019803690),o=this.md5_gg(o,r,i,n,e[s+3],14,-187363961),n=this.md5_gg(n,o,r,i,e[s+8],20,1163531501),i=this.md5_gg(i,n,o,r,e[s+13],5,-1444681467),r=this.md5_gg(r,i,n,o,e[s+2],9,-51403784),o=this.md5_gg(o,r,i,n,e[s+7],14,1735328473),n=this.md5_gg(n,o,r,i,e[s+12],20,-1926607734),i=this.md5_hh(i,n,o,r,e[s+5],4,-378558),r=this.md5_hh(r,i,n,o,e[s+8],11,-2022574463),o=this.md5_hh(o,r,i,n,e[s+11],16,1839030562),n=this.md5_hh(n,o,r,i,e[s+14],23,-35309556),i=this.md5_hh(i,n,o,r,e[s+1],4,-1530992060),r=this.md5_hh(r,i,n,o,e[s+4],11,1272893353),o=this.md5_hh(o,r,i,n,e[s+7],16,-155497632),n=this.md5_hh(n,o,r,i,e[s+10],23,-1094730640),i=this.md5_hh(i,n,o,r,e[s+13],4,681279174),r=this.md5_hh(r,i,n,o,e[s+0],11,-358537222),o=this.md5_hh(o,r,i,n,e[s+3],16,-722521979),n=this.md5_hh(n,o,r,i,e[s+6],23,76029189),i=this.md5_hh(i,n,o,r,e[s+9],4,-640364487),r=this.md5_hh(r,i,n,o,e[s+12],11,-421815835),o=this.md5_hh(o,r,i,n,e[s+15],16,530742520),n=this.md5_hh(n,o,r,i,e[s+2],23,-995338651),i=this.md5_ii(i,n,o,r,e[s+0],6,-198630844),r=this.md5_ii(r,i,n,o,e[s+7],10,1126891415),o=this.md5_ii(o,r,i,n,e[s+14],15,-1416354905),n=this.md5_ii(n,o,r,i,e[s+5],21,-57434055),i=this.md5_ii(i,n,o,r,e[s+12],6,1700485571),r=this.md5_ii(r,i,n,o,e[s+3],10,-1894986606),o=this.md5_ii(o,r,i,n,e[s+10],15,-1051523),n=this.md5_ii(n,o,r,i,e[s+1],21,-2054922799),i=this.md5_ii(i,n,o,r,e[s+8],6,1873313359),r=this.md5_ii(r,i,n,o,e[s+15],10,-30611744),o=this.md5_ii(o,r,i,n,e[s+6],15,-1560198380),n=this.md5_ii(n,o,r,i,e[s+13],21,1309151649),i=this.md5_ii(i,n,o,r,e[s+4],6,-145523070),r=this.md5_ii(r,i,n,o,e[s+11],10,-1120210379),o=this.md5_ii(o,r,i,n,e[s+2],15,718787259),n=this.md5_ii(n,o,r,i,e[s+9],21,-343485551),i=this.safe_add(i,a),n=this.safe_add(n,l),o=this.safe_add(o,d),r=this.safe_add(r,h)}return[i,n,o,r]},i.md5_cmn=function(e,t,i,n,o,r){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(n,r)),o),i)},i.md5_ff=function(e,t,i,n,o,r,s){return this.md5_cmn(t&i|~t&n,e,t,o,r,s)},i.md5_gg=function(e,t,i,n,o,r,s){return this.md5_cmn(t&n|i&~n,e,t,o,r,s)},i.md5_hh=function(e,t,i,n,o,r,s){return this.md5_cmn(t^i^n,e,t,o,r,s)},i.md5_ii=function(e,t,i,n,o,r,s){return this.md5_cmn(i^(t|~n),e,t,o,r,s)},i.safe_add=function(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i},i.bit_rol=function(e,t){return e<<t|e>>>32-t},e}();e.MD5=t,egret.registerClass(t,"Model.MD5")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(e,t,i){this.i=0,this.image=e,this.rate=i,this.list=t}var t=(__define,e),i=t.prototype;return i.play=function(e){var t=this;egret.setTimeout(function(){t.image.source=t.list[t.i],t.i++,t.i<t.list.length?t.play(e):(t.image.source=null,null!=e&&e())},this,1e3/this.rate)},e}();e.MovieClip=t,egret.registerClass(t,"Model.MovieClip")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(e,t,i,n,o){this.version="1.2",this.msecPerSecond=1e3,this.msecPerMinute=6e4,this.msecPerHour=36e5,this.msecPerDay=864e5,this.msecs=0,this.isTimeSpan=!0,this.isNumeric(o)&&(this.msecs+=o*this.msecPerDay),this.isNumeric(n)&&(this.msecs+=n*this.msecPerHour),this.isNumeric(i)&&(this.msecs+=i*this.msecPerMinute),this.isNumeric(t)&&(this.msecs+=t*this.msecPerSecond),this.isNumeric(e)&&(this.msecs+=e)}var t=(__define,e),i=t.prototype;return i.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},i.addMilliseconds=function(e){this.isNumeric(e)&&(this.msecs+=e)},i.addSeconds=function(e){this.isNumeric(e)&&(this.msecs+=e*this.msecPerSecond)},i.addMinutes=function(e){this.isNumeric(e)&&(this.msecs+=e*this.msecPerMinute)},i.addHours=function(e){this.isNumeric(e)&&(this.msecs+=e*this.msecPerHour)},i.addDays=function(e){this.isNumeric(e)&&(this.msecs+=e*this.msecPerDay)},i.subtractMilliseconds=function(e){this.isNumeric(e)&&(this.msecs-=e)},i.subtractSeconds=function(e){this.isNumeric(e)&&(this.msecs-=e*this.msecPerSecond)},i.subtractMinutes=function(e){this.isNumeric(e)&&(this.msecs-=e*this.msecPerMinute)},i.subtractHours=function(e){this.isNumeric(e)&&(this.msecs-=e*this.msecPerDay)},i.subtractDays=function(e){this.isNumeric(e)&&(this.msecs-=e*this.msecPerDay)},i.add=function(e){e.isTimeSpan&&(this.msecs+=e.totalMilliseconds())},i.subtract=function(e){e.isTimeSpan&&(this.msecs+=e.totalMilliseconds())},i.equals=function(e){e.isTimeSpan&&this.msecs===e.totalMilliseconds()},i.totalMilliseconds=function(e){var t=this.msecs;return e===!0&&(t=Math.floor(t)),t},i.totalSeconds=function(e){var t=this.msecs/this.msecPerSecond;return e===!0&&(t=Math.floor(t)),t},i.totalMinutes=function(e){var t=this.msecs/this.msecPerMinute;return e===!0&&(t=Math.floor(t)),t},i.totalHours=function(e){var t=this.msecs/this.msecPerHour;return e===!0&&(t=Math.floor(t)),t},i.totalDays=function(e){var t=this.msecs/this.msecPerDay;return e===!0&&(t=Math.floor(t)),t},i.milliseconds=function(){return this.msecs%1e3},i.seconds=function(){return Math.floor(this.msecs/this.msecPerSecond)%60},i.minutes=function(){return Math.floor(this.msecs/this.msecPerMinute)%60},i.hours=function(){return Math.floor(this.msecs/this.msecPerHour)%24},i.days=function(){return Math.floor(this.msecs/this.msecPerDay)},i.toString=function(){var e=String("0"+this.hours()).slice(-2),t=String("0"+this.minutes()).slice(-2),i=String("0"+this.seconds()).slice(-2);return String(e+":"+t+":"+i)},i.getVersion=function(){return this.version},e.FromSeconds=function(t){return new e(0,t,0,0,0)},e.FromMinutes=function(t){return new e(0,0,t,0,0)},e.FromHours=function(t){return new e(0,0,0,t,0)},e.FromDays=function(t){return new e(0,0,0,0,t)},e.FromDates=function(t,i,n){var o=i.valueOf()-t.valueOf();return n===!0&&(o=Math.abs(o)),new e(o,0,0,0,0)},e}();e.TimeSpan=t,egret.registerClass(t,"Model.TimeSpan")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.padLeft=function(e,t,i){for(;e.length<i;)e=t+e;return e},e.GetQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return null!=i?decodeURI(i[2]):null},e.getURLParam=function(e){var t="",i=!1,n=(document.location.href,document.location.search),o=new RegExp("\\?","g");if(n=String("?"+n.substring(1,n.length).replace(o,"&")),0==n.indexOf("?")&&n.indexOf("=")>1)for(var r=n.substring(1,n.length).split("&"),s=0;s<r.length&&!i;)r[s].indexOf("=")>0&&r[s].split("=")[0].toLowerCase()==e.toLowerCase()&&(t=r[s].split("=")[1],i=!0),s++;return t},e}();e.Tools=t,egret.registerClass(t,"Model.Tools")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.TrainedModel=t,egret.registerClass(t,"Model.TrainedModel")}(Model||(Model={}));var Model;!function(e){var t=function(){function t(){t.initHeader("h005")}var i=(__define,t);i.prototype;return t.initHeader=function(e){this.webServiceHeader=e},t.changeHeader=function(e){""!=this.webServiceHeader&&this.webServiceHeader!=e?this.webServiceHeader=e:console.log("zhujun: webServerHeader is no change ! ")},t.userLogin=function(t,i){this.onCompleteBack=i;var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open(this.loginUrl+"user/login",egret.HttpMethod.POST);var o=new e.HashMap;o.Set("thirdAccountId",t.thirdAccountId),o.Set("id",t.id),o.Set("time",t.time),o.Set("platform",t.platform),o.Set("sign",t.sign),n.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),n.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this),n.send(JSON.stringify(o))},t.menuData=function(e){console.log("cai_haotian token: "+this.webServiceHeader),this.onCompleteBack=e;var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,t.open(this.logicUrl+"menu/data",egret.HttpMethod.POST),t.setRequestHeader("USER-TOKEN",this.webServiceHeader),t.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),t.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this),t.send()},t.drawMoney=function(e){this.onCompleteBack=e;var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,t.open(this.logicUrl+"draw/money",egret.HttpMethod.POST),t.setRequestHeader("USER-TOKEN",this.webServiceHeader),t.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),t.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this),t.send()},t.skillTraining=function(t,i){this.onCompleteBack=i;var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open(this.logicUrl+"skill/training",egret.HttpMethod.POST),n.setRequestHeader("USER-TOKEN",this.webServiceHeader);var o=new e.HashMap;o.Set("skillId",t),n.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),n.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this),n.send(JSON.stringify(o))},t.skillSpeedUp=function(t,i){this.onCompleteBack=i;var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open(this.logicUrl+"skill/speedUp",egret.HttpMethod.POST),n.setRequestHeader("USER-TOKEN",this.webServiceHeader);var o=new e.HashMap;o.Set("skillId",t),n.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),n.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this),n.send(JSON.stringify(o))},t.skillTrained=function(t,i){this.onCompleteBack=i;var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open(this.logicUrl+"skill/trained",egret.HttpMethod.POST),n.setRequestHeader("USER-TOKEN",this.webServiceHeader);var o=new e.HashMap;o.Set("skillId",t),n.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),n.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this),n.send(JSON.stringify(o))},t.mallData=function(t,i){this.onCompleteBack=i;var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open(this.logicUrl+"mall/data",egret.HttpMethod.POST),n.setRequestHeader("USER-TOKEN",this.webServiceHeader);var o=new e.HashMap;o.Set("type",t),n.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),n.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this),n.send(JSON.stringify(o))},t.gameData=function(t,i){console.log("zhujun: game data id is "+t),this.onCompleteBack=i;var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open(this.logicUrl+"game/data",egret.HttpMethod.POST),n.setRequestHeader("USER-TOKEN",this.webServiceHeader);var o=new e.HashMap;o.Set("id",t),n.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),n.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this),n.send(JSON.stringify(o))},t.gameAccount=function(t,i,n,o,r){this.onCompleteBack=r;var s=new egret.HttpRequest;s.responseType=egret.HttpResponseType.TEXT,s.open(this.logicUrl+"game/account",egret.HttpMethod.POST),s.setRequestHeader("USER-TOKEN",this.webServiceHeader);var a=new e.HashMap;a.Set("sceneId",t),a.Set("isWin",i),a.Set("maxAnswer",n),a.Set("correctTimes",o),s.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),s.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),s.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this),s.send(JSON.stringify(a))},t.onPostComplete=function(e){var t=e.currentTarget;console.log("post data : ",t.response),this.changeHeader(t.getResponseHeader("USER-TOKEN")),console.log("test: get token "+t.getResponseHeader("USER-TOKEN")),null!=this.onCompleteBack&&this.onCompleteBack(t)},t.onPostIOError=function(e){console.log("post error : "+e),console.log("post error data : "+e.data),alert("当前浏览器存在系统缺陷，请更换浏览器尝试哦 ! "),null!=this.onErrorBack&&this.onErrorBack()},t.onPostProgress=function(e){console.log("post progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%"),null!=this.onProgressBack&&this.onProgressBack()},t.loginUrl="http://www.luckywings.net/api/h005/login/",t.logicUrl="http://www.luckywings.net/api/h005/logical/",t}();e.WebService=t,egret.registerClass(t,"Model.WebService")}(Model||(Model={}));var Model;!function(e){var t=function(){function t(){}var i=(__define,t);i.prototype;return t.appVer="v1.0.0",t.appName="爱学霸",t.isStartBank=!1,t.accountM=new e.AccountModel,t.menuDataM=new e.MenuDataModel,t.gameDataM=new e.GameDataModel,t.drawM=new e.DrawMoneyModel,t.mallM=new e.MallModel,t.settleM=new e.SettleAccountModel,t.skillM=new e.SkillTrainingModel,t.trainedM=new e.TrainedModel,t}();e.WebValue=t,egret.registerClass(t,"Model.WebValue")}(Model||(Model={}));var Model;!function(e){var t=function(){function t(){}var i=(__define,t);i.prototype;return t.init=function(t,i){var n={appName:e.WebValue.appName,appId:"CF2AE1D27E276445E74E9440FF1C52B69",appVersion:e.WebValue.appVer,channel:i,uid:t,errorReport:!0};DCAgent.init(n)},t.login=function(e){DCAgent.login(e)},t.onOpenMall=function(){DCAgent.onEvent("OpenMall")},t.onCloseMall=function(){DCAgent.onEvent("CloseMall")},t.onPayment=function(e,t,i,n){var o={amount:1,currencyType:t,payType:String("CNY: "+i),iapid:e,orderId:String("渠道号: "+n)};DCAgent.onPayment(o)},t}();e.DataEyeService=t,egret.registerClass(t,"Model.DataEyeService")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.Play68Model=t,egret.registerClass(t,"Model.Play68Model");var i=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.P68UserInfo=i,egret.registerClass(i,"Model.P68UserInfo")}(Model||(Model={}));var Model;!function(e){var t=function(){function t(){}var i=(__define,t);i.prototype;return t.assignmentPlay68Model=function(){var i=["openid","pf","ts"];i.sort();var n=new e.HashMap;n.Set(i[0],e.Tools.getURLParam(i[0])),n.Set(i[1],e.Tools.getURLParam(i[1])),n.Set(i[2],e.Tools.getURLParam(i[2])),n.Set("sign",e.Tools.getURLParam("sign")),e.Play68Value.p68Model=n;var o=new e.MD5,r=o.hex_md5(String(n.Get(i[0])+n.Get(i[1])+n.Get(i[2])+t.play68key));return e.WebValue.accountM.id=e.Play68Value.p68Model.openid,e.WebValue.accountM.thirdAccountId=e.Play68Value.p68Model.openid,e.WebValue.accountM.platform=e.Play68Value.p68Model.pf,e.WebValue.accountM.time=e.Play68Value.p68Model.ts,e.WebValue.accountM.sign=e.Play68Value.p68Model.sign,e.Play68Value.p68Model.sign!=r?void alert("当前平台不合法，请勿充值!"):void 0},t.play68Url="http://www.play68.com/",t.play68key="b92ababa363be1e416db0ace8f16fe33",t}();e.Play68Service=t,egret.registerClass(t,"Model.Play68Service")}(Model||(Model={}));var Model;!function(e){var t=function(){function t(){}var i=(__define,t);i.prototype;return t.p68Model=new e.Play68Model,t.p68UserInfo=new e.P68UserInfo,t}();e.Play68Value=t,egret.registerClass(t,"Model.Play68Value")}(Model||(Model={}));var Model;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.QbaoModel=t,egret.registerClass(t,"Model.QbaoModel");var i=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.QbaoUserInfo=i,egret.registerClass(i,"Model.QbaoUserInfo")}(Model||(Model={}));var Model;!function(e){var t=function(){function t(){}var i=(__define,t);i.prototype;return t.assignmentQbaoModel=function(){var i=["channel","userId"];i.sort();var n=new e.HashMap;n.Set(i[0],e.Tools.getURLParam(i[0])),n.Set(i[1],e.Tools.getURLParam(i[1])),e.QbaoValue.QbaoModel=n;var o=new e.MD5;o.hex_md5(String(n.Get(i[0])+n.Get(i[1])+t.Qbaokey));e.WebValue.accountM.id=e.QbaoValue.QbaoModel.userId,e.WebValue.accountM.thirdAccountId=e.QbaoValue.QbaoModel.userId,e.WebValue.accountM.platform=e.QbaoValue.QbaoModel.channel},t.QbaoUserCheck=function(e,t,i){this.onCompleteBack=i;var n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT,n.open("http://www.eyuelan.com/i5you/user/check/?userid="+e+"&token="+t,egret.HttpMethod.GET),n.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),n.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),n.send()},t.QbaoPay=function(t,i,n,o){this.onCompleteBack=o;var r=new egret.HttpRequest;r.responseType=egret.HttpResponseType.TEXT,r.open(e.WebService.logicUrl+"pay/index",egret.HttpMethod.POST),r.setRequestHeader("USER-TOKEN",e.WebService.webServiceHeader);var s=new e.HashMap;s.Set("channelId",t),s.Set("itemId",i),s.Set("itemName",n),console.log("cai_haotian send channelId: "+t),console.log("cai_haotian send itemName: "+i),console.log("cai_haotian send itemName: "+n),console.log("cai_haotian send JSON :"+JSON.stringify(s)),r.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),r.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),r.send(JSON.stringify(s))},t.onGetComplete=function(e){var t=e.currentTarget;console.log("cai_haotian Qbao connect success"),null!=this.onCompleteBack&&this.onCompleteBack(t)},t.onGetIOError=function(e){console.log("post error : "+e),console.log("post error data : "+e.data),alert("CHT 当前浏览器存在系统缺陷，请更换浏览器尝试哦 ! "),console.log("cai_haotian Qbao login fail !!!!!!!")},t.onGetProgress=function(e){console.log("post progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},t.Qbaokey="6bd1bbb10fab7e58a8797aaa348c41c3",t}();e.QbaoService=t,egret.registerClass(t,"Model.QbaoService")}(Model||(Model={}));var Model;!function(e){var t=function(){function t(){}var i=(__define,t);i.prototype;return t.QbaoModel=new e.QbaoModel,t.QbaoUserInfo=new e.QbaoUserInfo,t}();e.QbaoValue=t,egret.registerClass(t,"Model.QbaoValue")
}(Model||(Model={}));var Model;!function(e){var t=function(){function t(){}var i=(__define,t);i.prototype;return t.initSDK=function(t){if("3"==e.Tools.getURLParam("channel"))e.Play68Service.assignmentPlay68Model(),t(),e.DataEyeService.init(e.WebValue.accountM.id,"3");else if("5"==e.Tools.getURLParam("channel")){var i=e.Tools.getURLParam("userid"),n=e.Tools.getURLParam("token");e.QbaoService.QbaoUserCheck(Number(i),n,function(i){"success"==JSON.parse(i.response).result?(console.log("cai_haotian Qbao response"+JSON.stringify(i.response)),e.QbaoService.assignmentQbaoModel(),t(),e.DataEyeService.init(e.WebValue.accountM.id,"5"),console.log("cai_haotian login success!!!!!!!!")):alert("非法登陆！！")})}else e.DataEyeService.init(e.WebValue.accountM.id,"888"),alert("当前平台非法,请勿充值!")},t.initPay=function(t,i,n,o){"3"==e.Tools.getURLParam("channel")?(Play68.pay(t,i,n,1),e.DataEyeService.onPayment(t,i,n,3)):"5"==e.Tools.getURLParam("channel")?(console.log("cai_haotian itemid : "+t),console.log("cai_haotian itemName : "+i),e.QbaoService.QbaoPay("5",t,i,function(o){console.log("cai_haotian Qbao response"+JSON.stringify(o.response)),JSON.parse(o.response).checkOutUrl?(location.href=JSON.parse(o.response).checkOutUrl,console.log("cai_haotian1 cp交易流水号"+JSON.parse(o.response).outTradeCode),console.log("cai_haotian1 qb交易流水号"+JSON.parse(o.response).qbTradeCode),e.DataEyeService.onPayment(t,i,n,5)):(alert("交易出错！！"),console.log("cai_haotian2 cp交易流水号"+JSON.parse(o.response).outTradeCode),console.log("cai_haotian2 qb交易流水号"+JSON.parse(o.response).qbTradeCode))})):(alert("当前平台非法,请勿充值!"),e.DataEyeService.onPayment(t,i,n,888))},t}();e.SDKService=t,egret.registerClass(t,"Model.SDKService")}(Model||(Model={}));var ThemeAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getTheme=function(e,t,i,n){function o(e){t.call(n,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);var ViewModel;!function(e){var t=function(e){function t(t,i){e.call(this),this.skinName="View.BankMsgItemView",this.uiGroup=t,this.str=i,this.x=52.5,this.y=102.5,this.uiGroup.addChild(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){var t=this;e.prototype.createChildren.call(this),void 0!=this.str?(this.backMsgImage.visible=!1,this.backMsgLabel.size=92,this.backMsgLabel.text=String("+"+this.str)):console.log("Test: bank no earn ! ");var i=egret.Tween.get(this.bankMsgGroup);i.to({alpha:1},1500);var n=egret.Tween.get(this.bankMsgGroup);n.to({y:-200},1500).call(function(){t.uiGroup.removeChild(t)})},t}(eui.Component);e.BankMsgItemVM=t,egret.registerClass(t,"ViewModel.BankMsgItemVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(t,i,n,o){var r=this;e.call(this),this.skinName="View.ErrorMsgView",this.uiLayer=t,this.errorMsg.text=i,this.uiLayer.addChild(this),this.Yes.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){r.uiLayer.removeChild(r)},this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){e.prototype.createChildren.call(this)},t}(eui.Component);e.ErrorMsgVM=t,egret.registerClass(t,"ViewModel.ErrorMsgVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(t,i){e.call(this),this.skinName="View.HeadItemView"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){var t=this;e.prototype.createChildren.call(this),this.headMask.touchEnabled=!1,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){t.headMask.visible=!0,egret.localStorage.setItem("headBtn",String(t.headBtn.source)),egret.localStorage.setItem("headBg",t.headBg.source.toString())},this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){null!=t.onCallBack&&t.onCallBack()},this),this.addEventListener(egret.TouchEvent.TOUCH_END,function(){t.headMask.visible=!1},this)},t}(eui.Component);e.HeadItemVM=t,egret.registerClass(t,"ViewModel.HeadItemVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(t,i){e.call(this),this.skinName="View.HeadMsgView",this.uiLayer=t,this.onCallBack=i,this.uiLayer.addChild(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){var t=this;e.prototype.createChildren.call(this);var i=egret.Tween.get(this.headListGroup);i.to({scaleX:1,scaleY:1},300,egret.Ease.circIn),this.sagittariusBtn.headBtn.source="01",this.sagittariusBtn.headBg.source="hong",this.sagittariusBtn.onCallBack=function(){t.onClose()},this.leoBtn.headBtn.source="05",this.leoBtn.headBg.source="hong",this.leoBtn.onCallBack=function(){t.onClose()},this.ariesBtn.headBtn.source="09",this.ariesBtn.headBg.source="hong",this.ariesBtn.onCallBack=function(){t.onClose()},this.scorpioBtn.headBtn.source="02",this.scorpioBtn.headBg.source="huang",this.scorpioBtn.onCallBack=function(){t.onClose()},this.libraBtn.headBtn.source="06",this.libraBtn.headBg.source="huang",this.libraBtn.onCallBack=function(){t.onClose()},this.cancerBtn.headBtn.source="10",this.cancerBtn.headBg.source="huang",this.cancerBtn.onCallBack=function(){t.onClose()},this.taurusBtn.headBtn.source="03",this.taurusBtn.headBg.source="lan",this.taurusBtn.onCallBack=function(){t.onClose()},this.geminiBtn.headBtn.source="07",this.geminiBtn.headBg.source="lan",this.geminiBtn.onCallBack=function(){t.onClose()},this.capricornBtn.headBtn.source="11",this.capricornBtn.headBg.source="lan",this.capricornBtn.onCallBack=function(){t.onClose()},this.virgoBtn.headBtn.source="04",this.virgoBtn.headBg.source="zi",this.virgoBtn.onCallBack=function(){t.onClose()},this.piscesBtn.headBtn.source="08",this.piscesBtn.headBg.source="zi",this.piscesBtn.onCallBack=function(){t.onClose()},this.aquariusBtn.headBtn.source="12",this.aquariusBtn.headBg.source="zi",this.aquariusBtn.onCallBack=function(){t.onClose()},this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.onClose()},this)},n.onClose=function(){var e=this;null!=this.onCallBack&&this.onCallBack();var t=egret.Tween.get(this.headListGroup);t.to({scaleX:0,scaleY:0},300,egret.Ease.circIn).call(function(){e.uiLayer.removeChild(e)})},t}(eui.Component);e.HeadMsgVM=t,egret.registerClass(t,"ViewModel.HeadMsgVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(t){e.call(this),this.scene=1,this.uiLayer=t,this.skinName="View.IntroductionView",this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageClick,this),this.uiLayer.addChildAt(this,3)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onStageClick=function(){return this.scene++,4==this.scene?void this.uiLayer.removeChild(this):void(this.background.source="introduction"+this.scene)},n.createChildren=function(){e.prototype.createChildren.call(this)},t}(eui.Component);e.IntroductionVM=t,egret.registerClass(t,"ViewModel.IntroductionVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(){e.call(this),this.skinName="View.LevelItemView",this.name="LevelItemVM"}__extends(t,e);var i=__define,n=t,o=n.prototype;return i(o,"levelImageSource",void 0,function(e){this.levelImage.source=e}),i(o,"levelModel",void 0,function(e){var t=this;this.lModel=e,this.levelImage.source=e.imageName,this.levelName.text=this.lModel.name,this.costValue.text=String(this.lModel.goldCost),this.duringValue.text=String(this.lModel.duringTurns+"秒"),this.turnValue.text=String(this.lModel.turns+"回合"),Model.WebValue.menuDataM.playerModel.level>=this.lModel.unlockLevel?(this.lockGroup.visible=!1,this.levelItemGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){null!=t.onCallBack&&t.onCallBack(t.lModel)},this)):(this.lockLabel.text=String("等级"+this.lModel.unlockLevel+" 解锁"),this.levelMask.visible=!1,this.levelItemGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){},this))}),o.createChildren=function(){e.prototype.createChildren.call(this);var t=new egret.Rectangle(0,0,212,550);this.levelItemGroup.mask=t},t}(eui.ItemRenderer);e.LevelItemVM=t,egret.registerClass(t,"ViewModel.LevelItemVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(t,i){var n=this;e.call(this),this.uiLayer=i,this.skinName="View.LevelUpView",this.levelupName.text=t,this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){n.uiLayer.removeChild(n)},this);var o=egret.Tween.get(this.light,{loop:!0});o.to({alpha:1},1200,egret.Ease.sineIn).to({alpha:.5},1200,egret.Ease.sineIn),this.uiLayer.addChild(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){e.prototype.createChildren.call(this)},t}(eui.Component);e.LevelUpVM=t,egret.registerClass(t,"ViewModel.LevelUpVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(){e.call(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){e.prototype.createChildren.call(this),this.skinName="View.LoadingBarItem",this.thumb=this.loadingBar,this.labelDisplay=this.loadingLabel,this.minimum=0,this.value=0,this.maximum=100},n.setProgress=function(e,t){this.value=Math.floor(e/t*100),this.handleIcon.x=380*e/t-35},t}(eui.ProgressBar);e.LoadingBarItemVM=t,egret.registerClass(t,"ViewModel.LoadingBarItemVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(t,i){e.call(this),this.skinName="View.LogoView",this.onCallBack=i,this.uiLayer=t,this.uiLayer.addChild(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){e.prototype.createChildren.call(this),null!=this.onCallBack&&this.onCallBack()},t}(eui.Component);e.LogoVM=t,egret.registerClass(t,"ViewModel.LogoVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){!function(e){e[e.Player=0]="Player",e[e.Opponent=1]="Opponent"}(e.Camp||(e.Camp={}));var t=e.Camp,i=function(i){function n(e,t,n){i.call(this),this.deltaDotX=-98,this.timeValue=0,this.onShowEnemyMark=null,this.playerSelect=-1,this.opponentSelect=-1,this.queIndex=0,this.answerIndex=0,this.correctTimes=0,this.answerTimes=0,this.skinName="View.MainGameView",this.uiLayer=e,this.onCallBack=t,this.lModel=n,this.uiLayer.addChild(this)}__extends(n,i);var o=(__define,n),r=o.prototype;return r.createChildren=function(){i.prototype.createChildren.call(this),null!=this.onCallBack&&this.onCallBack(),this.initSearchGroup()},r.initSearchGroup=function(){var e=egret.Tween.get(this.myGroup);e.to({x:0},300,egret.Ease.circIn),this.initHead(),this.initDotAnim(),this.initBoBoAnim(),this.cancelBtnEvent(),this.sendGameData()},r.initHead=function(){var e=egret.localStorage.getItem("headBtn"),t=egret.localStorage.getItem("headBg");this.headIcon.source=null==e?"01":e,this.headBg.source=null==t?"hong":t,this.nameLabel.text=Model.WebValue.menuDataM.playerModel.nickName},r.initDotAnim=function(){var e=this;if(0==this.searchGroup.visible)return this.timeValue=0,void(this.timeLabel.text="0");new Model.AudioService("drop_mp3");this.timeLabel.text=String(++this.timeValue);var t=egret.Tween.get(this.dotGroup);console.log(this.timeLabel.text),t.to({x:this.deltaDotX},500).wait(1e3).call(function(){e.dotGroup.x=0,e.initDotAnim()})},r.initBoBoAnim=function(){var e=this,t=egret.Tween.get(this.bobo_01);t.to({scaleX:1,scaleY:1},2e3).call(function(){e.bobo_01.scaleX=0,e.bobo_01.scaleY=0,e.initBoBoAnim()})},r.cancelBtnEvent=function(){},r.resetSearchGroup=function(){this.initDotAnim(),this.sendGameData()},r.sendGameData=function(){var e=this;console.log("zhujun: sendGameData "),Model.WebService.gameData(String(this.lModel.sceneId),function(t){Model.WebValue.gameDataM=JSON.parse(t.response);var i=Model.WebValue.gameDataM.enemyModel,n=function(){return 1==i.headId||5==i.headId||9==i.headId?"hong":2==i.headId||6==i.headId||10==i.headId?"huang":3==i.headId||7==i.headId||11==i.headId?"lan":"zi"};e.opponentHeadBg.source=n(),e.opponentHeadIcon.source=Model.Tools.padLeft(String(i.headId),"0",2),e.opponentName.text=i.name,e.initGameHead(),e.resetGameHead(),e.resetDuringTurns(),e.initScoreBar(),e.resetTitle(),e.initQATurn(),e.during=e.lModel.duringTurns,egret.setTimeout(function(){var t=egret.Tween.get(e.matchGroup);t.to({x:0},1e3,egret.Ease.sineIn).call(function(){e.shuziBg.visible=!0;var t=egret.Tween.get(e.shuziBg);t.to({alpha:1},1e3,egret.Ease.sineIn);var i=egret.Tween.get(e.shuziBg);i.to({scaleX:.2,scaleY:.2},1e3,egret.Ease.sineIn).call(function(){var t=2*e.lModel.goldCost,i=1e3,n=egret.getTimer(),o=function(o){var r=(o-n)/i,s=Model.Mathf.lerp(0,t,r);return e.shuziLabel.visible=!0,e.shuziLabel.text=Math.floor(s).toString(),!0};if(egret.startTick(o,e),egret.setTimeout(function(){egret.stopTick(o,e),e.matchGroup.x=640,e.searchGroup.visible=!1,e.gameGroup.visible=!0,e.gameheadAnim(),egret.setTimeout(function(){e.shuziLabel.text="",e.shuziLabel.visible=!1},e,1),e.shuziBg.alpha=.1,e.shuziBg.scaleX=1,e.shuziBg.scaleY=1,e.shuziBg.visible=!1},e,i),egret.localStorage.getItem("sound")?Model.WebValue.isSound="on"===egret.localStorage.getItem("sound")?!0:!1:Model.WebValue.isSound=!0,Model.WebValue.isSound){var r=new Model.AudioService;r.setLoop(2),r.setKey("coin_mp3"),r.play()}var s=new egret.MovieClipDataFactory(RES.getRes("challengSequence_json"),RES.getRes("challengSequence_png")),a=new egret.MovieClip(s.generateMovieClipData("challengSequence"));a.scaleX=1.8,a.scaleY=1.8,a.x=200,a.y=0,e.searchGroup.addChild(a),a.addEventListener(egret.Event.COMPLETE,function(){e.searchGroup.removeChild(a)},e),a.play();var l=new egret.MovieClipDataFactory(RES.getRes("challengSequence_json"),RES.getRes("challengSequence_png")),d=new egret.MovieClip(l.generateMovieClipData("challengSequence"));d.scaleX=1.8,d.scaleY=1.8,d.x=1100,d.y=700,d.rotation=-180,e.searchGroup.addChild(d),d.addEventListener(egret.Event.COMPLETE,function(){e.searchGroup.removeChild(d)},e),d.play()})})},e,2e3)})},r.initGameHead=function(){var e=Model.WebValue.menuDataM.playerModel,t=Model.WebValue.gameDataM.enemyModel;this.myGameHead.enabled=!1;var i=egret.localStorage.getItem("headBtn"),n=egret.localStorage.getItem("headBg");this.myGameHead.headBtn.source=null==i?"01":i,this.myGameHead.headBg.source=null==n?"hong":n,this.myNameLabel.text=e.nickName,this.opponentGameHead.enabled=!1;var o=function(){return 1==t.headId||5==t.headId||9==t.headId?"hong":2==t.headId||6==t.headId||10==t.headId?"huang":3==t.headId||7==t.headId||11==t.headId?"lan":"zi"};this.opponentGameHead.headBg.source=o(),this.opponentGameHead.headBtn.source=Model.Tools.padLeft(String(t.headId),"0",2),this.opponentNameLabel.text=t.name},r.gameheadAnim=function(){var e=this,t=egret.Tween.get(this.myGameHeadGroup);t.to({x:20,y:20},500);var i=egret.Tween.get(this.opponentGameHeadGroup);i.to({x:1083.5,y:20},500).call(function(){e.scoreBarAnim(),e.duringTurnsAnim()})},r.resetGameHead=function(){this.myGameHeadGroup.x=-197,this.myGameHeadGroup.y=-240,this.opponentGameHeadGroup.x=1300,this.opponentGameHeadGroup.y=-240},r.initQATurn=function(){this.resetQA();var e=Model.WebValue.gameDataM.questionListModel;console.log("this.queIndex "+this.queIndex),this.queLabel.text=e[this.queIndex].question,this.answerIndex=e[this.queIndex].answerIndex;for(var t=0;t<this.answerBtnGroup.numChildren;t++){var i=this.answerBtnGroup.getChildAt(t);i.label=e[this.queIndex].answerList[t]}this.answer_01.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addBtn1,this),this.answer_02.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addBtn2,this),this.answer_03.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addBtn3,this),this.answer_04.addEventListener(egret.TouchEvent.TOUCH_TAP,this.addBtn4,this)},r.titleAnim=function(){var e=this;this.duringLabel.text=String(this.during),this.qIdLabel.text=String("第"+(this.queIndex+1).toString()+"题"),this.typeLabel.text=Model.WebValue.gameDataM.questionListModel[this.queIndex].type,this.typeGroup.visible=!0;var t=egret.Tween.get(this.typeGroup);t.to({alpha:1},800).call(function(){e.reverseTitleAnim()});var i=egret.Tween.get(this.typeGroup);i.to({scaleX:1,scaleY:1},500);var n=egret.Tween.get(this.qIdLabel);n.to({alpha:1},500);var o=egret.Tween.get(this.qIdLabel);o.to({scaleX:1,scaleY:1},500)},r.reverseTitleAnim=function(){var e=this,t=egret.Tween.get(this.typeGroup);t.to({alpha:0},500);var i=egret.Tween.get(this.qIdLabel);i.to({alpha:0},500).call(function(){e.typeGroup.visible=!1,e.typeLabel.text="",e.qIdLabel.scaleX=.1,e.qIdLabel.scaleY=.1,e.qIdLabel.text="",e.QAAnim()})},r.resetTitle=function(){this.typeGroup.alpha=0,this.typeGroup.visible=!1,this.typeLabel.text="",this.qIdLabel.alpha=0,this.qIdLabel.scaleX=.1,this.qIdLabel.scaleY=.1,this.qIdLabel.text=""},r.QAAnim=function(){var e=this,t=egret.Tween.get(this.queLabel);t.to({alpha:1},500).call(function(){e.answerBtnGroup.visible=!0;var t=egret.Tween.get(e.answerBtnGroup);t.to({alpha:1},500);var i=egret.Tween.get(e.answerBtnGroup);i.to({scaleX:1,scaleY:1},500),e.initDuringTurns(),e.initEnemyAI()})},r.resetQA=function(){this.queLabel.alpha=0,this.queLabel.text="",this.answerBtnGroup.alpha=0,this.answerBtnGroup.scaleX=.1,this.answerBtnGroup.scaleY=.1,this.answerBtnGroup.visible=!1},r.initDuringTurns=function(){var e=this,t=Model.WebValue.gameDataM.questionListModel;this.duringLabel.text=String(this.during),this.during<=0||this.answerTimes>=2?(this.answerTimes=0,setTimeout(function(){if(console.log("答完一题,重置计时."),e.queIndex>=t.length-1){console.log("答完所有题目,终止计时.");var i=function(){return e.isResultWin=e.myScoreImage.height>e.opponentScoreImage.height,e.isResultWin};return Model.WebService.gameAccount(e.lModel.sceneId.toString(),i(),1,e.correctTimes,function(t){Model.WebValue.settleM=JSON.parse(t.response),e.onReplyComplete()}),e.queIndex=0,e.onShowEnemyMark=null,e.onResetSelectBtn(e.playerSelect),e.onResetSelectBtn(e.opponentSelect),e.playerSelect=-1,e.opponentSelect=-1,void e.resetScoreBar()}return e.during=e.lModel.duringTurns,void e.onNextQA()},1500)):setTimeout(function(){e.duringLabel.text=String(e.during),--e.during,e.initDuringTurns()},1e3)},r.duringTurnsAnim=function(){var e=egret.Tween.get(this.daojishiGroup);e.to({alpha:1},500,egret.Ease.sineIn);var t=egret.Tween.get(this.daojishiGroup);t.to({scaleX:1,scaleY:1},500,egret.Ease.sineIn)},r.resetDuringTurns=function(){this.daojishiGroup.scaleX=.3,this.daojishiGroup.scaleY=.3,this.daojishiGroup.alpha=.3},r.initScoreBar=function(){this.myScoreGroup.x=-150,this.opponentScoreGroup.x=1318},r.scoreBarAnim=function(){var e=this,t=egret.Tween.get(this.myScoreGroup);t.to({x:10,y:290},500);var i=egret.Tween.get(this.opponentScoreGroup);i.to({x:1168,y:290},500).call(function(){e.titleAnim()})},r.resetScoreBar=function(){this.myScoreImage.height=0,this.opponentScoreImage.height=0},r.onNextQA=function(){this.onShowEnemyMark=null,this.onResetSelectBtn(this.playerSelect),this.onResetSelectBtn(this.opponentSelect),this.playerSelect=-1,this.opponentSelect=-1,++this.queIndex,console.log("一题结束,增加题号id: this.queIndex++"+this.queIndex),this.initQATurn(),this.titleAnim()},r.initEnemyAI=function(){var e=this,i=Model.WebValue.gameDataM.enemyModel.answerDetailModel;setTimeout(function(){e.onSelectAnswer(e.answerIndex,i[e.queIndex].ansIndex,t.Opponent)},1e3*i[this.queIndex].timeCost)},r.addBtn1=function(){this.clearBtnEvent(),this.onSelectAnswer(this.answerIndex,0,t.Player)},r.addBtn2=function(){this.clearBtnEvent(),this.onSelectAnswer(this.answerIndex,1,t.Player)},r.addBtn3=function(){this.clearBtnEvent(),this.onSelectAnswer(this.answerIndex,2,t.Player)},r.addBtn4=function(){this.clearBtnEvent(),this.onSelectAnswer(this.answerIndex,3,t.Player)},r.clearBtnEvent=function(){this.answer_01.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addBtn1,this),this.answer_02.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addBtn2,this),this.answer_03.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addBtn3,this),this.answer_04.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.addBtn4,this)},r.onSelectAnswer=function(e,i,n){var o=this;if(this.answerTimes++,e==i){var r=function(){o.answerMaskGroup.visible=!0;var e=o.answerMaskGroup.getChildAt(i);e.source="button_lv",e.visible=!0};if(n==t.Player){r(),this.correctTimes++,this.playerSelect=i,this.leftMarkGroup.visible=!0;var s=this.leftMarkGroup.getChildAt(i);s.source="icon_dadui01",s.visible=!0,this.setMyScoreBar(!0);new Model.AudioService("user_correct_mp3")}else this.setEnemyScoreBar(!0,function(){r(),o.answerMaskGroup.touchEnabled=!1;var e=o.answerMaskGroup.getChildAt(i);e.touchEnabled=!1,o.opponentSelect=i,o.rightMarkGroup.visible=!0;var t=o.rightMarkGroup.getChildAt(i);t.source="icon_dadui01",t.visible=!0})}else{var r=function(){o.answerMaskGroup.visible=!0;var e=o.answerMaskGroup.getChildAt(i);e.source="button_hong",e.visible=!0};if(n==t.Player){r(),this.playerSelect=i,this.leftMarkGroup.visible=!0;var s=this.leftMarkGroup.getChildAt(i);s.source="icon_dacuo01",s.visible=!0,this.setMyScoreBar(!1);new Model.AudioService("user_wrong_mp3")}else this.setEnemyScoreBar(!1,function(){r(),o.answerMaskGroup.touchEnabled=!1;var e=o.answerMaskGroup.getChildAt(i);e.touchEnabled=!1,o.opponentSelect=i,o.rightMarkGroup.visible=!0;var t=o.rightMarkGroup.getChildAt(i);t.source="icon_dacuo01",t.visible=!0})}},r.setEnemyScoreBar=function(e,t){var i=this;if(e)this.opponentScoreImage.height+=374*this.enemyEarnScore()/(200*this.lModel.turns),console.log("enemy score "+this.enemyEarnScore()),console.log("enemy height"+this.opponentScoreImage.height);else{this.opponentErrorImage.visible=!0,this.opponentErrorImage.height-=this.opponentScoreImage.height,this.opponentErrorImage.bottom+=this.opponentScoreImage.height;var n=egret.Tween.get(this.opponentErrorImage);n.to({alpha:1},500,egret.Ease.sineIn).call(function(){i.opponentErrorImage.visible=!1,i.opponentErrorImage.height+=i.opponentScoreImage.height,i.opponentErrorImage.bottom-=i.opponentScoreImage.height})}-1!=this.playerSelect?(t(),this.onShowEnemyMark=null):this.onShowEnemyMark=t},r.enemyEarnScore=function(){return Math.ceil(200*Model.WebValue.gameDataM.enemyModel.answerDetailModel[this.queIndex].timeCost/this.lModel.duringTurns)},r.setMyScoreBar=function(e){var t=this;if(e)console.log("this.myEarnScore() "+this.myEarnScore()),this.myScoreImage.height+=374*this.myEarnScore()/(200*this.lModel.turns);else{this.myErrorImage.visible=!0,this.myErrorImage.height-=this.myScoreImage.height,this.myErrorImage.bottom+=this.myScoreImage.height;var i=egret.Tween.get(this.myErrorImage);i.to({alpha:1},500,egret.Ease.sineIn).call(function(){t.myErrorImage.visible=!1,t.myErrorImage.height+=t.myScoreImage.height,t.myErrorImage.bottom-=t.myScoreImage.height})}null!=this.onShowEnemyMark&&(this.onShowEnemyMark(),this.onShowEnemyMark=null)},r.myEarnScore=function(){return console.log("this.basic score "+this.lModel+" this.during "+this.during+" this.lModel.duringTurns "+this.lModel.duringTurns),Math.ceil(200*(this.during/this.lModel.duringTurns))},r.onResetSelectBtn=function(e){if(-1==e)return void console.log("此次没有选择，不需要重置.");this.leftMarkGroup.visible=!1;var t=this.leftMarkGroup.getChildAt(e);t.visible=!1,this.rightMarkGroup.visible=!1;var t=this.rightMarkGroup.getChildAt(e);t.visible=!1,this.answerMaskGroup.visible=!1;var i=this.answerMaskGroup.getChildAt(e);i.visible=!1},r.onReplyComplete=function(){var t=this;this.uiLayer.swapChildrenAt(0,1),this.initAccountHead(),this.initResult(),this.gameGroup.visible=!1,this.accountGroup.visible=!0;var i=function(){var i=new e.MainMenuVM(t.uiLayer,function(){alert("zhujun:　main menu on call back !　")},e.PageName.SceneList);t.uiLayer.removeChild(t),i.num++},n=function(){var r=Model.WebValue.settleM.gold,s=Model.WebValue.menuDataM.playerModel;console.log(s.gold),s.gold>=-r?(t.uiLayer.swapChildrenAt(0,1),t.accountGroup.visible=!1,t.searchGroup.visible=!0,t.resetSearchGroup(),t.searchOpponentBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,n,t.searchOpponentBtn),t.againChallengeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,i,t.againChallengeBtn),t.backHomeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,o,t.backHomeBtn)):new e.ErrorMsgVM(t.uiLayer,"您当前金币不足，请充值兑换哦！")},o=function(){t.uiLayer.removeChild(t);var i=new e.MainMenuVM(t.uiLayer);i.num++};this.againChallengeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,i,this.againChallengeBtn),this.searchOpponentBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,n,this.searchOpponentBtn),this.backHomeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,o,this.backHomeBtn)},r.initAccountHead=function(){var e=Model.WebValue.menuDataM.playerModel,t=Model.WebValue.gameDataM.enemyModel;this.myAccountHead.enabled=!1;var i=egret.localStorage.getItem("headBtn"),n=egret.localStorage.getItem("headBg");this.myAccountHead.headBtn.source=null==i?"01":i,this.myAccountHead.headBg.source=null==n?"hong":n,this.myAccountNameLabel.text=e.nickName,this.opponentAccountHead.enabled=!1;var o=function(){return 1==t.headId||5==t.headId||9==t.headId?"hong":2==t.headId||6==t.headId||10==t.headId?"huang":3==t.headId||7==t.headId||11==t.headId?"lan":"zi"};this.opponentAccountHead.headBg.source=o(),this.opponentAccountHead.headBtn.source=Model.Tools.padLeft(String(t.headId),"0",2),this.opponentAccountNameLabel.text=t.name},r.initResult=function(){this.isResultWin?(this.resultlabel.text="挑战成功",DCAgent.onMissionFinished(this.lModel.sceneId.toString(),888)):(this.resultlabel.text="挑战失败",DCAgent.onMissionUnfinished(this.lModel.sceneId.toString(),888)),this.rightByRightLabel.text="回报结算",this.goldLabel.text=Model.WebValue.settleM.gold.toString(),this.expLabel.text=Model.WebValue.settleM.exp.toString();var t=Model.WebValue.menuDataM.playerModel;t.expCurrent+Model.WebValue.settleM.exp<t.expMax?t.expCurrent+=Number(this.expLabel.text):(t.level=Model.WebValue.settleM.level,t.expCurrent+=Number(this.expLabel.text),t.expCurrent-=t.expMax,t.expMax=Model.WebValue.settleM.expMax,new e.LevelUpVM("第 "+Model.WebValue.settleM.level+" 级",this.uiLayer));var i=this.isResultWin?parseInt(t.militaryExploit.slice(t.militaryExploit.indexOf("战")+1))+1:parseInt(t.militaryExploit.slice(t.militaryExploit.indexOf("战")+1));t.jackpot+=Model.WebValue.settleM.gold,t.militaryExploit=parseInt(t.militaryExploit)+1+"战"+i+"胜",t.winRate=Math.round(i/parseInt(t.militaryExploit)*1e3)/10,t.rightQueNum+=this.correctTimes,this.correctTimes=0,e.TitleInfoVM.singleton.plusGold(Model.WebValue.settleM.gold),e.TitleInfoVM.singleton.plusLevel(Model.WebValue.settleM.level),e.TitleInfoVM.singleton.expBar.value=t.expCurrent,e.TitleInfoVM.singleton.expBar.maximum=t.expMax;for(var n=Model.WebValue.menuDataM.skillModelList,o=0;o<n.length&&n[o].unlockLevel<=Model.WebValue.settleM.level;o++)n[o].unlock=!0},n}(eui.Component);e.MainGameVM=i,egret.registerClass(i,"ViewModel.MainGameVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(){e.call(this),this.menuItemSource="",this.menuItemText="",this.menuItemEnText="",this.skinName="View.MainMenuItemView",this.setSkinPart("menuItemSource",this.menuItemSource),this.setSkinPart("menuItemText",this.menuItemText),this.setSkinPart("menuItemEnText",this.menuItemEnText)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.childrenCreated=function(){this.menuItemBtn.source=this.menuItemSource,this.menuItemLabel.text=this.menuItemText,this.menuItemEnLabel.text=this.menuItemEnText},t}(eui.Button);e.MainMenuItemVM=t,egret.registerClass(t,"ViewModel.MainMenuItemVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){!function(e){e[e.MainMenu=0]="MainMenu",e[e.SceneList=1]="SceneList"}(e.PageName||(e.PageName={}));var t=e.PageName,i=function(i){function n(e,n,o){i.call(this),this.timer=0,this.num=0,this.addEventListener(eui.UIEvent.COMPLETE,this.onComplete,this),this.skinName="View.MainMenuView",this.uiLayer=e,this.onCallBack=n,this.uiLayer.addChildAt(this,0),o==t.SceneList&&this.extraInitSceneList()}__extends(n,i);var o=(__define,n),r=o.prototype;return r.extraInitSceneList=function(){this.menuBtnGroup.x=-1280,this.levelGroup.x=0},r.onComplete=function(){console.log("onComplete")},r.createChildren=function(){var e=this;i.prototype.createChildren.call(this),console.log("createChildren"),this.initHead(),this.initRecordBtn(),this.initSceneGroup(),this.initSkillGroup(),this.initInfoGroup(),this.initBank(),this.initBankBtn(),this.initFriendBtn(),this.initSpeedUpSkill(),this.skillItemBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){new Model.AudioService("click_mp3");e.maskBg.touchEnabled=!0;var t=egret.Tween.get(e.skillGroup);t.to({x:0},300,egret.Ease.circIn).call(function(){e.maskBg.touchEnabled=!1}),e.skillMask.visible=!1,e.skillUpGroup.visible=!1},this),this.skillBackBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){new Model.AudioService("click_mp3");e.maskBg.touchEnabled=!0;var t=egret.Tween.get(e.skillGroup);t.to({x:1280},300,egret.Ease.circIn).call(function(){e.maskBg.touchEnabled=!1})},this),this.challengeItemBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){new Model.AudioService("click_mp3");e.maskBg.touchEnabled=!0;var t=egret.Tween.get(e.menuBtnGroup);t.to({x:-1280},300,egret.Ease.circIn).call(function(){e.maskBg.touchEnabled=!1});var i=egret.Tween.get(e.levelGroup);i.to({x:0},300,egret.Ease.circIn)},this)},r.initFriendBtn=function(){var t=this;this.friendMask.touchEnabled=!1,this.friendItemBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){t.friendMask.visible=!0},this),this.friendItemBtn.addEventListener(egret.TouchEvent.TOUCH_END,function(){t.friendMask.visible=!1},this),this.friendItemBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){new Model.AudioService("click_mp3",function(){new e.ErrorMsgVM(t.uiLayer,"您的等级不足，此功能在30级以后开放 ! ")})},this)},r.initRecordBtn=function(){var t=this;this.recordMask.touchEnabled=!1,this.recordItemBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){t.recordMask.visible=!0},this),this.recordItemBtn.addEventListener(egret.TouchEvent.TOUCH_END,function(){t.recordMask.visible=!1},this),this.recordItemBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.recordBtnEvent,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnEvent,this),this.headSettingBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){new Model.AudioService("click_mp3");t.headMsgVM=new e.HeadMsgVM(t.uiLayer,function(){new Model.AudioService("click_mp3");t.initHead()})},this),this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){new Model.AudioService("click_mp3");t.maskBg.touchEnabled=!0;var e=egret.Tween.get(t.menuBtnGroup);e.to({x:0},300,egret.Ease.circIn).call(function(){t.maskBg.touchEnabled=!1});var i=egret.Tween.get(t.levelGroup);i.to({x:1280},300,egret.Ease.circIn)},this),this.headGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){new Model.AudioService("click_mp3");t.headMsgVM=new e.HeadMsgVM(t.uiLayer,function(){new Model.AudioService("click_mp3");t.initHead()})},this),this.achievementBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){new Model.AudioService("click_mp3",function(){new e.ErrorMsgVM(t.uiLayer,"您的等级不足，此功能20级后开放 ! ")})},this),this.systemSettingBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){new Model.AudioService("click_mp3");t.settingMsgVM=new e.SettingMsgVM(t.uiLayer,function(){new Model.AudioService("click_mp3")})},this)},r.initInfoGroup=function(){var e=Model.WebValue.menuDataM.playerModel;this.levelValue.text=String(e.level),this.expValue.text=String(e.expCurrent+"/"+e.expMax),this.rightNumValue.text=String(e.rightQueNum),this.beatNumValue.text=String(e.beatLevelOwnNum),this.jackpotValue.text=String(e.jackpot),this.goldAdditionValue.text=String(e.goldAddition+"%"),this.scoreAdditionValue.text=String(e.scoreAddition+"%"),this.expAdditionValue.text=String(e.expAddition+"%");var t=parseInt(e.militaryExploit),i=parseInt(e.militaryExploit.slice(e.militaryExploit.indexOf("战")+1));this.combatGainsValue.text=e.militaryExploit,this.winRateValue.text=t?String(Math.round(i/t*1e3)/10+"%"):"0"
},r.initSceneGroup=function(){for(var t=this,i=Model.WebValue.menuDataM.sceneModelList,n=0;n<this.levelListGroup.numChildren&&("LevelItemVM"==this.levelListGroup.getChildAt(n).name&&n<i.length);n++){var o=this.levelListGroup.getChildAt(n);o.levelModel=i[n],o.onCallBack=function(i){if(Model.WebValue.menuDataM.playerModel.gold<i.goldCost){new e.ErrorMsgVM(t.uiLayer,"您当前金币不足,请充值兑换哦 ! ");new Model.AudioService("rival_wrong_mp3",function(){})}else{new Model.AudioService("start_mp3");t.mainGameVM=new e.MainGameVM(t.uiLayer,function(){Model.WebValue.isStartBank=!0},i),console.log("Test: this name is "+t.name),t.uiLayer.removeChild(t)}}}},r.initSkillGroup=function(){for(var t=this,i=Model.WebValue.menuDataM.skillModelList,n=0;n<this.skillScrollerGroup.numChildren&&n<i.length;n++){var o=this.skillScrollerGroup.getChildAt(n);o.setSModel=i[n],0!=i[n].leftDuring&&i[n].leftDuring!=i[n].during&&this.jisuan(i[n]),o.onCallBack=null,o.onCallBack=function(i){return 0==i.dCost&&0==i.gCost?void new e.ErrorMsgVM(t.uiLayer,"已经升级到最高等级！"):Model.WebValue.menuDataM.playerModel.gold>=i.gCost&&Model.WebValue.menuDataM.playerModel.diamond>=i.dCost?(Model.WebService.skillTraining(i.skillId,function(n){Model.WebValue.skillM=JSON.parse(n.response),Model.WebValue.menuDataM.playerModel.gold=Model.WebValue.skillM.gold,Model.WebValue.menuDataM.playerModel.diamond=Model.WebValue.skillM.diamond,e.TitleInfoVM.singleton.updateGold(Model.WebValue.skillM.gold),e.TitleInfoVM.singleton.updateDiamond(Model.WebValue.skillM.diamond),t.jisuan(i,1)}),void console.log("this skill model call back "+i.name)):void(Model.WebValue.menuDataM.playerModel.gold>=i.gCost&&Model.WebValue.menuDataM.playerModel.diamond<i.dCost?new e.ErrorMsgVM(t.uiLayer,"对不起，您没有足够的钻石来升级技能！"):Model.WebValue.menuDataM.playerModel.gold<i.gCost&&Model.WebValue.menuDataM.playerModel.diamond>=i.dCost?new e.ErrorMsgVM(t.uiLayer,"对不起，您没有足够的金币来升级技能！"):new e.ErrorMsgVM(t.uiLayer,"对不起，您没有足够的金币和钻石来升级技能！"))}}},r.jisuan=function(t,i){egret.clearInterval(this.timer),this.skill=t,this.skillStateLabel.text=t.name+" Lv."+t.level;var n=egret.Tween.get(this.skillGroup);n.to({x:1280},300,egret.Ease.circIn),this.skillItemBtn.touchEnabled=!1,this.skillUpGroup.visible=!0,this.skillUpGroup.touchEnabled=!0,this.skillBar.value=Math.floor(t.leftDuring/t.during*100),this.skillBar.maximum=100,this.skillBar.minimum=0,this.skillBar.labelDisplay.visible=!1;var o=t.during-t.leftDuring,r=Model.TimeSpan.FromSeconds(o);this.skillLeftLabel.text=r.toString(),this.timer=egret.setInterval(function(){var n=this;return t.leftDuring==t.during?(this.skillUpGroup.touchEnabled=!1,egret.clearInterval(this.timer),this.twinkle(t),Model.WebService.skillTrained(t.skillId,function(e){console.log("new content："+JSON.stringify(JSON.parse(e.response).skillModel)),console.log("new addition"+JSON.stringify(JSON.parse(e.response).goldAddition)),Model.WebValue.trainedM.goldAddition=JSON.parse(e.response).goldAddition,Model.WebValue.trainedM.scoreAddition=JSON.parse(e.response).scoreAddition,Model.WebValue.trainedM.expAddition=JSON.parse(e.response).expAddition;var t=Model.WebValue.menuDataM.playerModel;t.goldAddition=Model.WebValue.trainedM.goldAddition,t.scoreAddition=Model.WebValue.trainedM.scoreAddition,t.expAddition=Model.WebValue.trainedM.expAddition,n.goldAdditionValue.text=String(t.goldAddition+"%"),n.scoreAdditionValue.text=String(t.scoreAddition+"%"),n.expAdditionValue.text=String(t.expAddition+"%");for(var i=JSON.parse(e.response).skillModel,o=0;o<n.skillScrollerGroup.numChildren;o++)Model.WebValue.menuDataM.skillModelList[o].skillId==i.skillId-1&&(Model.WebValue.menuDataM.skillModelList[o]=i,n.initSkillGroup())}),void new e.SkillTrainedVM(t.iconImage,t.name,"",this.uiLayer)):(1!=i&&(t.leftDuring-=1*this.num),t.leftDuring++,o=t.during-t.leftDuring,r=Model.TimeSpan.FromSeconds(o),this.skillLeftLabel.text=r.toString(),void(this.skillBar.value=Math.floor(t.leftDuring/t.during*100)))},this,1010)},r.initSpeedUpSkill=function(){var t=this;this.skillUpGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){new e.SkillSpeedUpVM(t.uiLayer,t.skill,function(){Model.WebValue.menuDataM.playerModel.diamond>=t.skill.speedCost?(egret.clearInterval(t.timer),Model.WebValue.menuDataM.playerModel.diamond-=t.skill.speedCost,e.TitleInfoVM.singleton.updateDiamond(Model.WebValue.menuDataM.playerModel.diamond),Model.WebService.skillSpeedUp(t.skill.skillId,function(e){t.twinkle(t.skill),console.log("new content："+JSON.stringify(JSON.parse(e.response).skillModel)),console.log("new addition:         fangchao       "+JSON.parse(e.response).goldAddition),Model.WebValue.trainedM.goldAddition=JSON.parse(e.response).goldAddition,Model.WebValue.trainedM.scoreAddition=JSON.parse(e.response).scoreAddition,Model.WebValue.trainedM.expAddition=JSON.parse(e.response).expAddition,console.log("方超在这儿"+JSON.stringify(Model.WebValue.trainedM)),console.log("fangchao 在此        "+JSON.stringify(Model.WebValue.trainedM));var i=Model.WebValue.menuDataM.playerModel;i.goldAddition=Model.WebValue.trainedM.goldAddition,i.scoreAddition=Model.WebValue.trainedM.scoreAddition,i.expAddition=Model.WebValue.trainedM.expAddition,t.goldAdditionValue.text=String(i.goldAddition+"%"),t.scoreAdditionValue.text=String(i.scoreAddition+"%"),t.expAdditionValue.text=String(i.expAddition+"%");for(var n=JSON.parse(e.response).skillModel,o=0;o<t.skillScrollerGroup.numChildren;o++)Model.WebValue.menuDataM.skillModelList[o].skillId==n.skillId-1&&(Model.WebValue.menuDataM.skillModelList[o]=n,t.initSkillGroup())}),t.uiLayer.removeChildAt(2)):new e.ErrorMsgVM(t.uiLayer,"钻石不足！"),new e.SkillTrainedVM(t.skill.iconImage,t.skill.name,"",t.uiLayer)})},this)},r.twinkle=function(e){this.skillItemBtn.touchEnabled=!0,this.skillUpGroup.touchEnabled=!1,this.skillBar.enabled=!1,this.skillStateLabel.text=e.name+" Lv."+e.level+" 升级完成！",this.skillLeftLabel.text="00:00:00",this.skillBar.value=100,this.skillMask.visible=!0,this.skillMask.alpha=.3;var t=egret.Tween.get(this.skillMask,{loop:!0});t.to({alpha:.8},1200,egret.Ease.sineIn).to({alpha:.3},1200,egret.Ease.sineIn)},r.initHead=function(){var e=egret.localStorage.getItem("headBtn"),t=egret.localStorage.getItem("headBg");this.headIcon.source=null==e?"01":e,this.headBg.source=null==t?"hong":t,this.nameLabel.text=Model.WebValue.menuDataM.playerModel.nickName},r.initBank=function(){var e=this,t=Model.WebValue.menuDataM.bankModel,i=Model.TimeSpan.FromSeconds(t.leftTime);this.leftTimeLabel.text=i.toString();var n=Model.WebValue.menuDataM.bankModel.goldMax-Math.ceil(i.totalSeconds()/60);if(Model.WebValue.menuDataM.bankModel.goldCurrent=n,this.goldPercent.text=String(t.goldCurrent+"/"+t.goldMax),this.goldBar.value=t.goldCurrent,this.goldBar.minimum=0,this.goldBar.maximum=t.goldMax,this.goldBar.labelDisplay.visible=!1,i.totalSeconds()<=0){this.bankMask.visible=!0,this.bankMask.alpha=.3;var o=egret.Tween.get(this.bankMask,{loop:!0});return void o.to({alpha:.8},1200,egret.Ease.sineIn).to({alpha:.3},1200,egret.Ease.sineIn)}egret.setTimeout(function(){Model.WebValue.menuDataM.bankModel.leftTime+=1*e.num,Model.WebValue.menuDataM.bankModel.leftTime-=1,e.initBank()},this,1e3)},r.initBankBtn=function(){var t=this;this.bankMask.touchEnabled=!1,this.bankItemBtn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){t.bankMask.visible=!0},this),this.bankItemBtn.addEventListener(egret.TouchEvent.TOUCH_END,function(){t.bankMask.visible=!1},this),this.bankItemBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){if(0!=Model.WebValue.menuDataM.bankModel.goldCurrent){new Model.AudioService("coin_mp3");Model.WebService.drawMoney(function(i){console.log("zhujun: draw money _request "+i);new e.BankMsgItemVM(t.bankItemGroup,String(Model.WebValue.menuDataM.bankModel.goldCurrent));Model.WebValue.menuDataM.bankModel.goldCurrent=0,Model.WebValue.menuDataM.bankModel.leftTime=60*Model.WebValue.menuDataM.bankModel.goldMax;var n=Model.WebValue.menuDataM.bankModel;t.goldPercent.text=String(n.goldCurrent+"/"+n.goldMax),t.goldBar.value=n.goldCurrent,"00:00:00"==t.leftTimeLabel.text&&t.initBank(),Model.WebValue.drawM=JSON.parse(i.response);var o=Model.WebValue.menuDataM.playerModel.gold;Model.WebValue.menuDataM.playerModel.gold+=Model.WebValue.drawM.gold;var r=500,s=egret.getTimer(),a=function(t){var i=(t-s)/r,n=Model.Mathf.lerp(o,Model.WebValue.menuDataM.playerModel.gold,i);return e.TitleInfoVM.singleton.updateGold(Math.floor(n)),!0};egret.startTick(a,t),egret.setTimeout(function(){egret.stopTick(a,t),egret.setTimeout(function(){console.log("cht : final2 "+Model.WebValue.menuDataM.playerModel.gold),e.TitleInfoVM.singleton.updateGold(Model.WebValue.menuDataM.playerModel.gold)},t,1)},t,r);var l=new egret.MovieClipDataFactory(RES.getRes("goldBankSequence_json"),RES.getRes("goldBankSequence_png")),d=new egret.MovieClip(l.generateMovieClipData("goldBankSequence"));d.scaleX=1.8,d.scaleY=1.8,d.x=-90,d.y=-80,t.bankItemGroup.addChild(d),d.addEventListener(egret.Event.COMPLETE,function(){t.bankItemGroup.removeChild(d)},t),d.play()})}else{new Model.AudioService("rival_wrong_mp3"),new e.BankMsgItemVM(t.bankItemGroup)}},this)},r.recordBtnEvent=function(){var e=this;new Model.AudioService("click_mp3");this.maskBg.touchEnabled=!0;var t=egret.Tween.get(this.recordGroup);t.to({x:0},500,egret.Ease.circIn);var i=egret.Tween.get(this.maskBg);i.to({alpha:.5},500,egret.Ease.circIn).call(function(){e.maskBg.addEventListener(egret.TouchEvent.TOUCH_TAP,e.closeBtnEvent,e)})},r.closeBtnEvent=function(){var e=this;new Model.AudioService("click_mp3");this.closeBtn.touchEnabled=!1,this.maskBg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.closeBtnEvent,this);var t=egret.Tween.get(this.recordGroup);t.to({x:-1280},500,egret.Ease.circIn);var i=egret.Tween.get(this.maskBg);i.to({alpha:0},500,egret.Ease.circIn).call(function(){e.maskBg.touchEnabled=!1,e.closeBtn.touchEnabled=!0})},n}(eui.Component);e.MainMenuVM=i,egret.registerClass(i,"ViewModel.MainMenuVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(t,i,n){e.call(this),this.type="",this.skinName="View.MallMsgView",this.uiLayer=t,this.onCallBack=n,this.type=i,this.uiLayer.addChild(this),Model.DataEyeService.onOpenMall()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){var t=this;e.prototype.createChildren.call(this);var i=Model.WebValue.mallM;this.mallTitle.text=String(i.goodsModelList[0].name+"商店"),this.priceLabel01.text=String("RMB "+i.goodsModelList[0].price),this.priceLabel02.text=String("RMB "+i.goodsModelList[1].price),this.priceLabel03.text=String("RMB "+i.goodsModelList[2].price),this.priceLabel04.text=String("RMB "+i.goodsModelList[3].price),"GCOIN"==this.type?(this.iconImage.source="icon_jinbi",this.iconImage.width=77.4,this.iconImage.height=79.2,this.goodsIcon01.source="icon_jinbi",this.goodsIcon02.source="icon_jinbi",this.goodsIcon03.source="icon_jinbi",this.goodsIcon04.source="icon_jinbi",this.goodsLabel01.text=String("购买"+i.goodsModelList[0].count+"金币"),this.goodsLabel02.text=String("购买"+i.goodsModelList[1].count+"金币"),this.goodsLabel03.text=String("购买"+i.goodsModelList[2].count+"金币"),this.goodsLabel04.text=String("购买"+i.goodsModelList[3].count+"金币"),this.goodsIcon01.width=43,this.goodsIcon01.height=44,this.goodsIcon02.width=43,this.goodsIcon02.height=44,this.goodsIcon03.width=43,this.goodsIcon03.height=44,this.goodsIcon04.width=43,this.goodsIcon04.height=44):"DIAMOND"==this.type?(this.iconImage.source="icon_zuan",this.iconImage.width=99,this.iconImage.height=75.6,this.goodsIcon01.source="icon_zuan",this.goodsIcon02.source="icon_zuan",this.goodsIcon03.source="icon_zuan",this.goodsIcon04.source="icon_zuan",this.goodsLabel01.text=String("购买"+i.goodsModelList[0].count+"粒宝石"),this.goodsLabel02.text=String("购买"+i.goodsModelList[1].count+"粒宝石"),this.goodsLabel03.text=String("购买"+i.goodsModelList[2].count+"粒宝石"),this.goodsLabel04.text=String("购买"+i.goodsModelList[3].count+"粒宝石"),this.goodsIcon01.width=55,this.goodsIcon01.height=42,this.goodsIcon02.width=55,this.goodsIcon02.height=42,this.goodsIcon03.width=55,this.goodsIcon03.height=42,this.goodsIcon04.width=55,this.goodsIcon04.height=42):alert("系统维护中，暂时无法充值!"),""===Model.Tools.getURLParam("channel")?(alert("当前平台非法,无法充值!"),this.goodsGroup01.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=i.goodsModelList[0];console.log("zhujun "+JSON.stringify(e)),Model.SDKService.initPay(e.goodsId.toString(),e.name,e.price)},this),this.goodsGroup02.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=i.goodsModelList[1];Model.SDKService.initPay(e.goodsId.toString(),e.name,e.price)},this),this.goodsGroup03.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=i.goodsModelList[2];Model.SDKService.initPay(e.goodsId.toString(),e.name,e.price)},this),this.goodsGroup04.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=i.goodsModelList[3];Model.SDKService.initPay(e.goodsId.toString(),e.name,e.price)},this)):(this.goodsGroup01.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=i.goodsModelList[0];console.log("zhujun "+JSON.stringify(e)),Model.SDKService.initPay(e.goodsId.toString(),e.name,e.price)},this),this.goodsGroup02.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=i.goodsModelList[1];Model.SDKService.initPay(e.goodsId.toString(),e.name,e.price)},this),this.goodsGroup03.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=i.goodsModelList[2];Model.SDKService.initPay(e.goodsId.toString(),e.name,e.price)},this),this.goodsGroup04.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=i.goodsModelList[3];Model.SDKService.initPay(e.goodsId.toString(),e.name,e.price)},this)),this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.uiLayer.removeChild(t),Model.DataEyeService.onCloseMall()},this)},t}(eui.Component);e.MallMsgVM=t,egret.registerClass(t,"ViewModel.MallMsgVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(t,i){e.call(this),this.skinName="View.SettingMsgView",this.uiLayer=t,this.onCallBack=i,this.uiLayer.addChild(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){var t=this;e.prototype.createChildren.call(this),egret.localStorage.getItem("state")?this.soundEffectBtn.currentState=egret.localStorage.getItem("state"):this.soundEffectBtn.currentState="downAndSelected",console.log(Model.WebValue.isSound),console.log("方超在此                  "+egret.localStorage.getItem("state")),this.soundEffectBtn.addEventListener(egret.Event.CHANGE,function(){Model.WebValue.isSound?(t.soundEffectBtn.currentState="up",Model.WebValue.isSound=!1):(t.soundEffectBtn.currentState="downAndSelected",Model.WebValue.isSound=!0),egret.localStorage.setItem("state",t.soundEffectBtn.currentState);var e=Model.WebValue.isSound?"on":"off";egret.localStorage.setItem("sound",e)},this),this.instructionBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){alert("此功能暂未开放,敬请期待 ! ")},this),this.problemReportBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){alert("此功能暂未开放,敬请期待 ! ")},this);var i=egret.Tween.get(this.settingRectGroup);i.to({scaleX:1,scaleY:1},300,egret.Ease.circIn),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.onClose()},this)},n.onClose=function(){var e=this;null!=this.onCallBack&&this.onCallBack();var t=egret.Tween.get(this.settingRectGroup);t.to({scaleX:0,scaleY:0},300,egret.Ease.circIn).call(function(){e.uiLayer.removeChild(e)})},t}(eui.Component);e.SettingMsgVM=t,egret.registerClass(t,"ViewModel.SettingMsgVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(){e.call(this),this.i=0,this.skinName="View.SkillItemView"}__extends(t,e);var i=__define,n=t,o=n.prototype;return i(o,"skillIconSource",void 0,function(e){this.skillIcon.source=e}),i(o,"setSModel",void 0,function(e){var t=this;this.sModel=e,console.log("zhujun: set skill model "+JSON.stringify(e)),e.unlock?(this.lockMaskGroup.visible=!1,this.skillItemGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.i%2==0&&null!=t.onCallBack&&t.onCallBack(t.sModel),t.i++},this)):this.lockMaskGroup.visible=!0,this.skillName.text=e.name,this.skillLv.text=String("LV."+e.level),this.skillGoldLabel.text=String(e.gCost),this.skillDiamondLabel.text=String(e.dCost),this.skillClockLabel.text=String(e.speedCost),this.unlockLabel.text=String("等级"+e.unlockLevel+" 解锁")}),o.createChildren=function(){e.prototype.createChildren.call(this)},t}(eui.ItemRenderer);e.SkillItemVM=t,egret.registerClass(t,"ViewModel.SkillItemVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(t,i,n){var o=this;e.call(this),this.uiLayer=t,this.skinName="View.SkillSpeedUpView",this.uiLayer.addChild(this),this._sModel=i,console.log("cai_haotian askill"+JSON.stringify(i)),this.initDetail(),this.use.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){n()},this),this.use.addEventListener(egret.TouchEvent.TOUCH_END,function(){o.uiLayer.removeChild(o)},this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){var t=this;e.prototype.createChildren.call(this),this.noNeed.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.uiLayer.removeChild(t)},this)},n.initDetail=function(){egret.clearInterval(o),this.skillName.text=this._sModel.name+" LV."+this._sModel.level,this.diamond.text=this._sModel.speedCost.toString(),this.skillDetail.text=this._sModel.des;var e=this._sModel.leftDuring,t=this._sModel.during,i=t-e,n=Model.TimeSpan.FromSeconds(i);this.skillLeftTime.text=n.toString();var o=egret.setInterval(function(){return e==t?void egret.clearInterval(o):(e++,i=t-e,n=Model.TimeSpan.FromSeconds(i),void(this.skillLeftTime.text=n.toString()))},this,1010)},t}(eui.Component);e.SkillSpeedUpVM=t,egret.registerClass(t,"ViewModel.SkillSpeedUpVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(t,i,n,o){var r=this;e.call(this),this.uiLayer=o,this.skinName="View.SkillTrainedView",this.skillName.text=i,this.skillDetail.text=n,this.skillImg.source=t,this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){r.uiLayer.removeChild(r)},this);var s=egret.Tween.get(this.light,{loop:!0});s.to({alpha:1},1200,egret.Ease.sineIn).to({alpha:.5},1200,egret.Ease.sineIn),this.uiLayer.addChild(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){e.prototype.createChildren.call(this)},t}(eui.Component);e.SkillTrainedVM=t,egret.registerClass(t,"ViewModel.SkillTrainedVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(e){function t(){e.call(this),this.skinName="View.TestView"}__extends(t,e);var i=(__define,t);i.prototype;return t}(eui.Component);e.TestVM=t,egret.registerClass(t,"ViewModel.TestVM")}(ViewModel||(ViewModel={}));var ViewModel;!function(e){var t=function(t){function i(e,n){t.call(this),i.singleton=this,this.skinName="View.TitleInfoView",this.uiLayer=e,this.onCallBack=n,this.uiLayer.addChild(this)}__extends(i,t);var n=(__define,i),o=n.prototype;return o.createChildren=function(){var n=this;t.prototype.createChildren.call(this);var o=Model.WebValue.menuDataM.playerModel;this.levelLabel.text=String("LV:"+o.level),this.expBar.maximum=o.expMax,this.expBar.value=o.expCurrent,this.diamondeLabel.text=String(o.diamond),this.goldLabel.text=String(o.gold),this.diamondGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Model.WebService.mallData("DIAMOND",function(t){Model.WebValue.mallM=JSON.parse(t.response);new e.MallMsgVM(n.uiLayer,"DIAMOND",function(e){Model.WebValue.menuDataM.playerModel.diamond+=e;var t=500,o=egret.getTimer(),r=function(n){var r=(n-o)/t,s=Model.Mathf.lerp(e,Model.WebValue.menuDataM.playerModel.diamond,r);return i.singleton.diamondeLabel.text=Math.floor(s).toString(),!0};egret.startTick(r,n),egret.setTimeout(function(){egret.stopTick(r,n)},n,t)})})},this),this.goldGroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Model.WebService.mallData("GCOIN",function(t){Model.WebValue.mallM=JSON.parse(t.response);new e.MallMsgVM(n.uiLayer,"GCOIN",function(e){Model.WebValue.menuDataM.playerModel.gold+=e;var t=500,o=egret.getTimer(),r=function(n){var r=(n-o)/t,s=Model.Mathf.lerp(e,Model.WebValue.menuDataM.playerModel.gold,r);return i.singleton.goldLabel.text=Math.floor(s).toString(),!0};egret.startTick(r,n),egret.setTimeout(function(){egret.stopTick(r,n)},n,t)})})},this)},o.plusGold=function(e){Model.WebValue.menuDataM.playerModel.gold+=e,Model.WebValue.menuDataM.playerModel.gold<=0&&(Model.WebValue.menuDataM.playerModel.gold=0),this.goldLabel.text=Model.WebValue.menuDataM.playerModel.gold.toString()},o.plusLevel=function(e){Model.WebValue.menuDataM.playerModel.level=e,this.levelLabel.text="LV:"+Model.WebValue.menuDataM.playerModel.level.toString()},o.updateGold=function(e){Model.WebValue.menuDataM.playerModel.gold<=0&&(Model.WebValue.menuDataM.playerModel.gold=0),this.goldLabel.text=e.toString()},o.updateDiamond=function(e){Model.WebValue.menuDataM.playerModel.diamond<=0&&(Model.WebValue.menuDataM.playerModel.diamond=0),this.diamondeLabel.text=e.toString()},i}(eui.Component);e.TitleInfoVM=t,egret.registerClass(t,"ViewModel.TitleInfoVM")}(ViewModel||(ViewModel={}));